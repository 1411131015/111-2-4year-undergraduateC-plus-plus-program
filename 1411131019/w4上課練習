#include <stdio.h>

              
struct student {
	int id;
	char name[20];
	int math;
	int computer;
	double avg;
};
typedef struct student STUDATA;

int main(void) 
{ 
   FILE *cfPtr; 
	unsigned int i;
   
   if ((cfPtr = fopen("accounts.dat", "wb")) == NULL) { 
      puts("File could not be opened.");				
   } 
   else { 
   
      STUDATA stu ={0, "", 0,0, 0.0}, blankstu={0, "", 0,0, 0.0};
	  for (i = 1; i <= 100; ++i) {                                   
         fwrite(&blankstu, sizeof(stu), 1, cfPtr);   
      }             
      printf("Enter id 1 to 100, 0 to end input: ");
	  scanf("%d",&stu.id);
     
      while (stu.id != 0) { 
         
         printf("Enter name,math,computer,average: ");
       
      
         fscanf(stdin, "%10s%10d%10d%10.1f", &stu.name,  & stu.math,  &stu.computer, &stu.avg);

        
         fseek(cfPtr, (stu.id - 1)*sizeof(stu), SEEK_SET);    
         fwrite(&stu, sizeof(stu), 1, cfPtr);
																		 
         
         printf("Enter id 1 to 100, 0 to end input: ");
         scanf("%d",stu.id);
      } 
      
    
      fclose(cfPtr);  
   } 
   


   if ((cfPtr = fopen("accounts.dat", "rb+")) == NULL) {
      puts("File could not be opened.");
   } 
   else { 
      printf("%10s%10d%10d%10.1f", "id", "Name","math", "computer","average");

      
      while (!feof(cfPtr)) { 
        
         STUDATA stu = {0, "", 0,0, 0.0};

         int result = fread(&stu, sizeof(STUDATA), 1, cfPtr);

       
         if (stu.id != 0) {  
            printf("%10s%10d%10d%10.1f", stu.name, stu.math, stu.computer,stu.avg);
         } 
      } 

      fclose(cfPtr); 
   } 
   
}
